<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Same-Day Urgent Imaging Access | Current State Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prop-types@15.8.1/prop-types.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/recharts@2.12.7/umd/Recharts.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #F6F7F9; font-family: 'DM Sans', sans-serif; }
  button { cursor: pointer; }
  button:hover { opacity: 0.9; }
</style>
</head>
<body>
<div id="root"></div>
<script>
var h = React.createElement;
var useState = React.useState;
var useMemo = React.useMemo;
var LineChart = Recharts.LineChart;
var Line = Recharts.Line;
var XAxis = Recharts.XAxis;
var YAxis = Recharts.YAxis;
var CartesianGrid = Recharts.CartesianGrid;
var Tooltip = Recharts.Tooltip;
var BarChart = Recharts.BarChart;
var Bar = Recharts.Bar;
var Cell = Recharts.Cell;
var ResponsiveContainer = Recharts.ResponsiveContainer;
var ReferenceLine = Recharts.ReferenceLine;

var C = {
  bg: "#F6F7F9", card: "#FFFFFF", cardBorder: "#E2E5EB",
  accent: "#2563EB", accentLight: "#EFF4FF",
  ct: "#0891B2", ctBg: "#ECFEFF", ctBorder: "#A5F3FC",
  mri: "#DB2777", mriBg: "#FDF2F8", mriBorder: "#FBCFE8",
  us: "#7C3AED", usBg: "#F5F3FF", usBorder: "#DDD6FE",
  overall: "#475569", text: "#1E293B", textMuted: "#64748B", textDim: "#94A3B8",
  stat: "#D97706", expedite: "#2563EB", urgent: "#059669", asap: "#7C3AED", emergency: "#DC2626",
  afterHours: "#D97706", green: "#059669", red: "#DC2626", white: "#FFFFFF",
  shadow: "0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04)",
  shadowLg: "0 4px 12px rgba(0,0,0,0.06), 0 2px 4px rgba(0,0,0,0.04)",
};
var font = "'DM Sans', sans-serif";
var monoFont = "'JetBrains Mono', 'Fira Code', monospace";
var modColor = { CT: C.ct, MRI: C.mri, US: C.us };

var schedTATAll = [
  { month: "Sep", CT: 31.4, MRI: 33.4, US: 20.1, Overall: 30.4 },
  { month: "Oct", CT: 43.1, MRI: 38.4, US: 18.9, Overall: 29.1 },
  { month: "Nov", CT: 45.3, MRI: 52.1, US: 26.0, Overall: 39.0 },
  { month: "Dec", CT: 43.4, MRI: 44.4, US: 23.3, Overall: 34.0 },
  { month: "Jan", CT: 38.2, MRI: 40.4, US: 30.1, Overall: 36.2 },
];
var schedTrendsAll = [
  { mod: "CT", change: "+6.8", pct: "+22%", color: C.ct },
  { mod: "MRI", change: "+7.0", pct: "+21%", color: C.mri },
  { mod: "US", change: "+10.0", pct: "+50%", color: C.us },
  { mod: "Overall", change: "+5.8", pct: "+19%", color: C.overall },
];
var accessTATAll = [
  { month: "Sep", CT: 189.5, MRI: 340.9, US: 105.3 },
  { month: "Oct", CT: 198.7, MRI: 269.5, US: 103.2 },
  { month: "Nov", CT: 144.6, MRI: 452.3, US: 155.1 },
  { month: "Dec", CT: 198.6, MRI: 411.5, US: 142.6 },
  { month: "Jan", CT: 179.1, MRI: 307.1, US: 148.0 },
];
var accessTrendsAll = [
  { mod: "CT", change: "-10", pct: "-5%", color: C.ct },
  { mod: "MRI", change: "-34", pct: "-10%", color: C.mri },
  { mod: "US", change: "+43", pct: "+41%", color: C.us },
];
var monthlyVolumeAll = [
  { month: "Sep", CT: 104, MRI: 49, US: 56, total: 209 },
  { month: "Oct", CT: 125, MRI: 47, US: 70, total: 242 },
  { month: "Nov", CT: 89, MRI: 45, US: 59, total: 193 },
  { month: "Dec", CT: 115, MRI: 46, US: 85, total: 246 },
  { month: "Jan", CT: 77, MRI: 44, US: 68, total: 189 },
];
var volTrendsAll = [
  { mod: "CT", change: "-27", pct: "-26%", color: C.ct },
  { mod: "MRI", change: "-5", pct: "-10%", color: C.mri },
  { mod: "US", change: "+12", pct: "+21%", color: C.us },
  { mod: "Total", change: "-20", pct: "-10%", color: C.overall },
];
var hourlyData = [
  { hour: "7a", cases: 8, block: "morning" },
  { hour: "8a", cases: 15, block: "morning" },
  { hour: "9a", cases: 22, block: "morning" },
  { hour: "10a", cases: 42, block: "morning" },
  { hour: "11a", cases: 75, block: "morning" },
  { hour: "12p", cases: 83, block: "afternoon" },
  { hour: "1p", cases: 112, block: "afternoon" },
  { hour: "2p", cases: 144, block: "afternoon" },
  { hour: "3p", cases: 181, block: "afternoon" },
  { hour: "4p", cases: 147, block: "afternoon" },
  { hour: "5p", cases: 55, block: "after" },
  { hour: "6p", cases: 63, block: "after" },
  { hour: "7p", cases: 55, block: "after" },
  { hour: "8p", cases: 48, block: "after" },
  { hour: "9p", cases: 38, block: "after" },
];
var timeBlocks = [
  { label: "Morning (8a-12p)", cases: 218, pct: 20.2, color: C.accent },
  { label: "Afternoon (12p-5p)", cases: 584, pct: 54.1, color: C.green },
  { label: "After Hours (5p-12a)", cases: 277, pct: 25.7, color: C.afterHours },
];
var metricsData = {
  All: { totalCases: "1,079", totalDetail: "216/mo avg across 3 modalities", schedVal: "33.4m", schedDetail: "Median \u00b7 Mean 52.0 \u00b7 P90: 134m", accessVal: "3.2 hrs", accessDetail: "189 min median \u00b7 Includes travel + wait", afterVal: "25.7%", afterDetail: "277 cases after 5 PM (vs 13% est.)", targetVal: "~17m", targetDetail: "50% reduction from 33.4m baseline" },
  CT: { totalCases: "510", totalDetail: "102/mo avg \u00b7 47.3% of all cases", schedVal: "38.8m", schedDetail: "Median \u00b7 Mean 60.4 \u00b7 P90: 135m", accessVal: "3.1 hrs", accessDetail: "187 min median \u00b7 Stable month-to-month", afterVal: "22.9%", afterDetail: "117 cases after 5 PM", targetVal: "~17m", targetDetail: "50% reduction from baseline" },
  MRI: { totalCases: "231", totalDetail: "46/mo avg \u00b7 21.4% of all cases", schedVal: "41.6m", schedDetail: "Median \u00b7 Mean 80.0 \u00b7 P90: 191m", accessVal: "6.0 hrs", accessDetail: "358 min median \u00b7 Highest of all modalities", afterVal: "64.1%", afterDetail: "148 of 231 cases after 5 PM", targetVal: "~17m", targetDetail: "50% reduction from baseline" },
  US: { totalCases: "338", totalDetail: "68/mo avg \u00b7 31.3% of all cases", schedVal: "22.6m", schedDetail: "Median \u00b7 Mean 37.2 \u00b7 P90: 95m", accessVal: "2.2 hrs", accessDetail: "134 min median \u00b7 Fastest modality", afterVal: "2.1%", afterDetail: "7 cases after 5 PM", targetVal: "~17m", targetDetail: "50% reduction from baseline" },
};
var priorityDataAll = {
  All: [ { name: "STAT", value: 634, pct: 58.8, color: C.stat }, { name: "Expedite", value: 400, pct: 37.1, color: C.expedite }, { name: "Urgent", value: 24, pct: 2.2, color: C.urgent }, { name: "ASAP", value: 20, pct: 1.9, color: C.asap }, { name: "Med Emergency", value: 1, pct: 0.1, color: C.emergency } ],
  CT: [ { name: "STAT", value: 381, pct: 74.7, color: C.stat }, { name: "Expedite", value: 116, pct: 22.7, color: C.expedite }, { name: "Urgent", value: 7, pct: 1.4, color: C.urgent }, { name: "ASAP", value: 5, pct: 1.0, color: C.asap }, { name: "Med Emergency", value: 1, pct: 0.2, color: C.emergency } ],
  MRI: [ { name: "Expedite", value: 178, pct: 77.1, color: C.expedite }, { name: "STAT", value: 35, pct: 15.2, color: C.stat }, { name: "Urgent", value: 9, pct: 3.9, color: C.urgent }, { name: "ASAP", value: 9, pct: 3.9, color: C.asap } ],
  US: [ { name: "STAT", value: 218, pct: 64.5, color: C.stat }, { name: "Expedite", value: 106, pct: 31.4, color: C.expedite }, { name: "Urgent", value: 8, pct: 2.4, color: C.urgent }, { name: "ASAP", value: 6, pct: 1.8, color: C.asap } ],
};
var siteDataAll = {
  All: [ { site: "Stanford Hospital", cases: 217, tat: "32.0m" }, { site: "Neuroscience", cases: 197, tat: "43.1m" }, { site: "OP Center RWC", cases: 161, tat: "36.5m" }, { site: "Img Ctr Palo Alto", cases: 129, tat: "34.1m" }, { site: "Blake Wilbur", cases: 127, tat: "42.1m" }, { site: "Advanced Med Ctr", cases: 94, tat: "2.0m" }, { site: "Cancer SB", cases: 87, tat: "26.6m" }, { site: "EHC", cases: 39, tat: "43.3m" } ],
  CT: [ { site: "Neuroscience", cases: 148, tat: "45.1m" }, { site: "OP Center RWC", cases: 88, tat: "29.9m" }, { site: "Img Ctr Palo Alto", cases: 73, tat: "33.0m" }, { site: "Stanford Hospital", cases: 69, tat: "37.8m" }, { site: "Blake Wilbur", cases: 48, tat: "35.4m" }, { site: "Cancer SB", cases: 45, tat: "60.2m" }, { site: "EHC", cases: 23, tat: "37.7m" }, { site: "SH500", cases: 9, tat: "37.4m" } ],
  MRI: [ { site: "Img Ctr Palo Alto", cases: 56, tat: "40.9m" }, { site: "Blake Wilbur", cases: 53, tat: "50.3m" }, { site: "OP Center RWC", cases: 50, tat: "51.2m" }, { site: "Neuroscience", cases: 43, tat: "31.4m" }, { site: "Stanford Hospital", cases: 8, tat: "93.0m" }, { site: "Advanced Med Ctr", cases: 6, tat: "36.3m" }, { site: "Cancer SB", cases: 5, tat: "48.8m" }, { site: "EHC Loc 2", cases: 5, tat: "20.0m" } ],
  US: [ { site: "Stanford Hospital", cases: 140, tat: "27.5m" }, { site: "Advanced Med Ctr", cases: 88, tat: "1.7m" }, { site: "Cancer SB", cases: 37, tat: "12.5m" }, { site: "Blake Wilbur", cases: 26, tat: "38.6m" }, { site: "OP Center RWC", cases: 23, tat: "31.1m" }, { site: "EHC", cases: 12, tat: "49.0m" }, { site: "Neuroscience", cases: 6, tat: "52.9m" }, { site: "EHC Loc 2", cases: 5, tat: "53.7m" } ],
};
var orderingDataAll = {
  All: [ { name: "Express Care Hoover", cases: 88 }, { name: "Breast Oncology", cases: 71 }, { name: "Sports Medicine", cases: 61 }, { name: "GI Oncology", cases: 45 }, { name: "Neurosurgery SNHC", cases: 35 }, { name: "Ortho-Sports Med", cases: 33 }, { name: "Int Med Menlo Park", cases: 26 }, { name: "Infusion Treatment", cases: 25 } ],
  CT: [ { name: "Express Care Hoover", cases: 51 }, { name: "GI Oncology", cases: 40 }, { name: "Neurosurgery SNHC", cases: 19 }, { name: "Int Med Menlo Park", cases: 18 }, { name: "Lung Transplant", cases: 16 }, { name: "Head/Neck Oncology", cases: 16 }, { name: "Internal Med West", cases: 12 }, { name: "Otolaryngology/HNS", cases: 12 } ],
  MRI: [ { name: "Sports Medicine", cases: 60 }, { name: "Ortho-Sports Med", cases: 19 }, { name: "Breast Oncology", cases: 12 }, { name: "Neurosurgery SNHC", cases: 12 }, { name: "Ortho - Hand", cases: 9 }, { name: "Ortho - Spine Center", cases: 9 }, { name: "Ortho - Foot & Ankle", cases: 8 }, { name: "Ortho - Trauma", cases: 7 } ],
  US: [ { name: "Breast Oncology", cases: 52 }, { name: "Express Care Hoover", cases: 31 }, { name: "CCSB 3rd Floor", cases: 18 }, { name: "Infusion Treatment", cases: 14 }, { name: "Gynecology", cases: 10 }, { name: "Gyn Oncology", cases: 9 }, { name: "Liver Transplant", cases: 9 }, { name: "CCSB 4th Floor", cases: 9 } ],
};
var examData = {
  CT: [ { exam: "CT Abdomen Pelvis w/ Contrast", cases: 84, pct: 16.5 }, { exam: "CT Head w/o Contrast", cases: 60, pct: 11.8 }, { exam: "CT Chest w/o Contrast", cases: 58, pct: 11.4 }, { exam: "CT Chest/Abd/Pelvis w/ Contrast", cases: 39, pct: 7.6 }, { exam: "CT Neck w/ Contrast", cases: 22, pct: 4.3 }, { exam: "CT Abd/Pelvis w/o Contrast", cases: 13, pct: 2.5 }, { exam: "CT Chest w/ Contrast", cases: 11, pct: 2.2 }, { exam: "CT Chest Angio (PE Protocol)", cases: 10, pct: 2.0 }, { exam: "CT Sinus w/o Contrast", cases: 9, pct: 1.8 }, { exam: "CT C-Spine w/o Contrast", cases: 9, pct: 1.8 }, { exam: "CT Shoulder w/o Contrast (R)", cases: 8, pct: 1.6 }, { exam: "CT Maxillofacial w/o Contrast", cases: 8, pct: 1.6 }, { exam: "CT Abd/Pelvis Low Dose (Stone)", cases: 8, pct: 1.6 }, { exam: "CT L-Spine w/o Contrast", cases: 8, pct: 1.6 } ],
  MRI: [ { exam: "MR Knee w/o Contrast (L)", cases: 25, pct: 10.8 }, { exam: "MR Knee w/o Contrast (R)", cases: 20, pct: 8.7 }, { exam: "MR Lumbar Spine w/o Contrast", cases: 17, pct: 7.4 }, { exam: "MR Breast w/ & w/o Contrast (Bilat)", cases: 15, pct: 6.5 }, { exam: "MR C-Spine w/o Contrast", cases: 10, pct: 4.3 }, { exam: "MR Shoulder w/o Contrast (R)", cases: 10, pct: 4.3 }, { exam: "MR Brain w/ & w/o Contrast", cases: 9, pct: 3.9 }, { exam: "MR Ankle w/o Contrast (R)", cases: 9, pct: 3.9 }, { exam: "MR Shoulder w/o Contrast (L)", cases: 8, pct: 3.5 }, { exam: "MR Brain w/o Contrast", cases: 6, pct: 2.6 }, { exam: "MR Ankle w/o Contrast (L)", cases: 6, pct: 2.6 }, { exam: "MR Foot w/o Contrast (R)", cases: 6, pct: 2.6 }, { exam: "MR Hip w/o Contrast (R)", cases: 5, pct: 2.2 }, { exam: "MR Elbow w/o Contrast (L)", cases: 4, pct: 1.7 } ],
  US: [ { exam: "US LE DVT Unilateral (L)", cases: 47, pct: 13.9 }, { exam: "US LE DVT Unilateral (R)", cases: 32, pct: 9.5 }, { exam: "US Breast Limited (L)", cases: 32, pct: 9.5 }, { exam: "US Breast Limited (R)", cases: 29, pct: 8.6 }, { exam: "US LE DVT Bilateral", cases: 23, pct: 6.8 }, { exam: "US UE DVT (R)", cases: 13, pct: 3.8 }, { exam: "US UE DVT (L)", cases: 11, pct: 3.3 }, { exam: "US Abd Liver Transplant Doppler", cases: 10, pct: 3.0 }, { exam: "US Breast Core Biopsy (R)", cases: 8, pct: 2.4 }, { exam: "US Pelvis TA/TV", cases: 8, pct: 2.4 }, { exam: "US Scrotum", cases: 8, pct: 2.4 }, { exam: "US Breast Limited (Bilat)", cases: 7, pct: 2.1 }, { exam: "US Breast Core Biopsy (L)", cases: 7, pct: 2.1 }, { exam: "US Abdomen", cases: 7, pct: 2.1 } ],
};
var examSummary = { CT: { total: 510, unique: 93 }, MRI: { total: 231, unique: 59 }, US: { total: 338, unique: 52 } };

function MetricCard(props) {
  return (
    h("div", { style: { background: props.highlight ? C.accentLight : C.card, border: "1px solid " + (props.highlight ? "#BFDBFE" : C.cardBorder), borderRadius: 10, padding: "16px 20px", boxShadow: C.shadow, flex: 1, minWidth: 170 } },
      h("div", { style: { fontFamily: font, fontSize: 10, color: C.textDim, textTransform: "uppercase", letterSpacing: "0.08em", marginBottom: 5 } }, props.label),
      h("div", { style: { fontFamily: monoFont, fontSize: 26, fontWeight: 700, color: props.highlight ? C.accent : C.text, lineHeight: 1.1, marginBottom: 4 } }, props.value),
      h("div", { style: { fontFamily: font, fontSize: 11, color: C.textMuted, lineHeight: 1.4 } }, props.detail)
    )
  );
}
function SectionTitle(props) {
  return (
    h("div", { style: { marginBottom: 14 } },
      h("h2", { style: { fontFamily: font, fontSize: 16, fontWeight: 600, color: C.text, margin: 0 } }, props.children),
      props.subtitle && h("p", { style: { fontFamily: font, fontSize: 12, color: C.textDim, margin: "3px 0 0 0" } }, props.subtitle)
    )
  );
}
function ChartCard(props) {
  return h("div", { style: Object.assign({ background: C.card, border: "1px solid " + C.cardBorder, borderRadius: 10, padding: 22, boxShadow: C.shadow }, props.style || {}) }, props.children);
}
function ModLegend(props) {
  var items = [{ label: "CT", color: C.ct }, { label: "MRI", color: C.mri }, { label: "US", color: C.us }];
  if (props.filter !== "All") items = items.filter(function(i) { return i.label === props.filter; });
  if (props.showOverall && props.filter === "All") items.push({ label: "Overall", color: C.overall });
  return (
    h("div", { style: { display: "flex", gap: 16, marginBottom: 6 } },
      items.map(function(m) { return h("div", { key: m.label, style: { display: "flex", alignItems: "center", gap: 5 } }, h("div", { style: { width: 8, height: 8, borderRadius: "50%", background: m.color } }), h("span", { style: { fontFamily: font, fontSize: 11, color: C.textMuted } }, m.label)); })
    )
  );
}
function TrendRow(props) {
  return (
    h("div", { style: { display: "flex", gap: 12, marginTop: 10, flexWrap: "wrap" } },
      props.trends.map(function(t) {
        return (
          h("div", { key: t.mod, style: { display: "flex", alignItems: "center", gap: 5 } },
            h("div", { style: { width: 6, height: 6, borderRadius: "50%", background: t.color } }),
            h("span", { style: { fontFamily: font, fontSize: 11, color: C.textMuted } }, t.mod),
            h("span", { style: { fontFamily: monoFont, fontSize: 11, fontWeight: 600, color: t.change.startsWith("+") ? C.red : C.green, background: t.change.startsWith("+") ? "#FEF2F2" : "#F0FDF4", padding: "1px 6px", borderRadius: 4 } }, t.change + " (" + t.pct + ")")
          )
        );
      })
    )
  );
}
function Callout(props) {
  return h("div", { style: { marginTop: 12, padding: "8px 12px", background: props.bg, borderLeft: "3px solid " + props.color, borderRadius: "0 6px 6px 0", fontSize: 12, color: props.color, lineHeight: 1.5 } }, props.children);
}
var tooltipStyle = {
  contentStyle: { background: C.white, border: "1px solid " + C.cardBorder, borderRadius: 8, fontFamily: font, fontSize: 12, color: C.text, boxShadow: C.shadowLg },
  itemStyle: { color: C.text, padding: "2px 0" },
  labelStyle: { color: C.textMuted, fontWeight: 600, marginBottom: 4 },
};
function AccessTooltip(props) {
  if (!props.active || !props.payload) return null;
  return (
    h("div", { style: Object.assign({}, tooltipStyle.contentStyle, { padding: "10px 14px" }) },
      h("div", { style: tooltipStyle.labelStyle }, props.label),
      props.payload.map(function(p) { return h("div", { key: p.dataKey, style: Object.assign({}, tooltipStyle.itemStyle, { color: p.color }) }, p.dataKey + ": " + Math.floor(p.value) + "min (" + (p.value / 60).toFixed(1) + "h)"); })
    )
  );
}
function GroupLabel(props) {
  return h("div", { style: { fontFamily: font, fontSize: 10, fontWeight: 600, color: C.textDim, textTransform: "uppercase", letterSpacing: "0.1em", marginBottom: 8 } }, props.children);
}
function ExamTable(props) {
  var exams = examData[props.modality];
  var summary = examSummary[props.modality];
  var topCases = exams.reduce(function(s, e) { return s + e.cases; }, 0);
  var otherCases = summary.total - topCases;
  var otherUnique = summary.unique - exams.length;
  return (
    h("div", null,
      h("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: 10 } },
        h("div", null,
          h("div", { style: { fontFamily: font, fontSize: 14, fontWeight: 600, color: C.text } }, props.modality),
          h("div", { style: { fontFamily: font, fontSize: 11, color: C.textDim } }, summary.unique + " unique exams")
        ),
        h("div", { style: { fontFamily: monoFont, fontSize: 16, fontWeight: 700, color: props.color, background: props.bgColor, border: "1px solid " + props.borderColor, borderRadius: 6, padding: "4px 10px" } }, summary.total)
      ),
      h("div", { style: { display: "flex", flexDirection: "column", gap: 0 } },
        exams.map(function(e, i) {
          return (
            h("div", { key: e.exam, style: { display: "flex", alignItems: "center", padding: "4px 4px", background: i % 2 === 0 ? "#F8FAFC" : "transparent", borderRadius: 3, gap: 6 } },
              h("span", { style: { fontSize: 11, color: C.textMuted, flex: 1, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" } }, e.exam),
              h("span", { style: { fontFamily: monoFont, fontSize: 11, color: C.text, width: 32, textAlign: "right", flexShrink: 0 } }, e.cases),
              h("div", { style: { width: 50, flexShrink: 0 } },
                h("div", { style: { width: "100%", height: 5, background: "#F1F5F9", borderRadius: 3, overflow: "hidden" } },
                  h("div", { style: { height: "100%", width: (e.cases / exams[0].cases) * 100 + "%", background: props.color, borderRadius: 3, opacity: 0.7 } })
                )
              )
            )
          );
        }),
        otherCases > 0 && (
          h("div", { style: { display: "flex", alignItems: "center", padding: "5px 4px 2px", borderTop: "1px dashed " + C.cardBorder, marginTop: 3, gap: 6 } },
            h("span", { style: { fontSize: 10, color: C.textDim, flex: 1, fontStyle: "italic" } }, "+" + otherUnique + " more"),
            h("span", { style: { fontFamily: monoFont, fontSize: 10, color: C.textDim, width: 32, textAlign: "right" } }, otherCases),
            h("div", { style: { width: 50 } })
          )
        )
      )
    )
  );
}

function Dashboard() {
  var filterState = useState("All");
  var filter = filterState[0];
  var setFilter = filterState[1];
  var examOpenState = useState(false);
  var examOpen = examOpenState[0];
  var setExamOpen = examOpenState[1];
  var modKeys = filter === "All" ? ["CT", "MRI", "US"] : [filter];
  var schedTAT = useMemo(function() { return filter === "All" ? schedTATAll : schedTATAll.map(function(d) { var r = { month: d.month }; r[filter] = d[filter]; return r; }); }, [filter]);
  var accessTAT = useMemo(function() { return filter === "All" ? accessTATAll : accessTATAll.map(function(d) { var r = { month: d.month }; r[filter] = d[filter]; return r; }); }, [filter]);
  var monthlyVolume = useMemo(function() { return filter === "All" ? monthlyVolumeAll : monthlyVolumeAll.map(function(d) { var r = { month: d.month }; r[filter] = d[filter]; return r; }); }, [filter]);
  var schedTrends = filter === "All" ? schedTrendsAll : schedTrendsAll.filter(function(t) { return t.mod === filter; });
  var accessTrends = filter === "All" ? accessTrendsAll : accessTrendsAll.filter(function(t) { return t.mod === filter; });
  var volTrends = filter === "All" ? volTrendsAll : volTrendsAll.filter(function(t) { return t.mod === filter || t.mod === "Total"; });
  var accessYMax = filter === "MRI" ? 500 : filter === "CT" ? 250 : filter === "US" ? 200 : 500;
  var m = metricsData[filter];
  var priorityData = priorityDataAll[filter];
  var siteData = siteDataAll[filter];
  var orderingData = orderingDataAll[filter];
  var maxPriority = Math.max.apply(null, priorityData.map(function(p) { return p.value; }));
  var maxOrdering = Math.max.apply(null, orderingData.map(function(o) { return o.cases; }));
  var filterButtons = [
    { key: "All", label: "All Modalities", color: C.accent, bg: C.accentLight, border: "#BFDBFE" },
    { key: "CT", label: "CT", color: C.ct, bg: C.ctBg, border: C.ctBorder },
    { key: "MRI", label: "MRI", color: C.mri, bg: C.mriBg, border: C.mriBorder },
    { key: "US", label: "US", color: C.us, bg: C.usBg, border: C.usBorder },
  ];
  var modSplitData = [
    { name: "CT", value: 510, color: C.ct },
    { name: "MRI", value: 231, color: C.mri },
    { name: "US", value: 338, color: C.us },
  ];
  var examMods = filter === "All" ? ["CT", "MRI", "US"] : [filter];
  var examColors = { CT: { color: C.ct, bg: C.ctBg, border: C.ctBorder }, MRI: { color: C.mri, bg: C.mriBg, border: C.mriBorder }, US: { color: C.us, bg: C.usBg, border: C.usBorder } };

  return (
    h("div", { style: { background: C.bg, minHeight: "100vh", fontFamily: font, color: C.text, padding: "28px 36px 50px" } },
      /* Header */
      h("div", { style: { marginBottom: 24, display: "flex", justifyContent: "space-between", alignItems: "flex-start", flexWrap: "wrap", gap: 12 } },
        h("div", null,
          h("div", { style: { display: "flex", alignItems: "center", gap: 10, marginBottom: 4 } },
            h("div", { style: { background: "linear-gradient(135deg, #2563EB, #7C3AED)", width: 6, height: 28, borderRadius: 3 } }),
            h("h1", { style: { fontFamily: font, fontSize: 24, fontWeight: 700, color: C.text, margin: 0, letterSpacing: "-0.02em" } }, "Same-Day Urgent Imaging Access")
          ),
          h("p", { style: { fontSize: 13, color: C.textDim, margin: "0 0 0 16px" } }, "Current State Analysis \u00B7 FY26 Baseline Data")
        ),
        h("div", { style: { textAlign: "right" } },
          h("div", { style: { fontSize: 12, color: C.textDim } }, "Lead: ", h("span", { style: { color: C.textMuted, fontWeight: 500 } }, "E. Sheridan"), " \u00A0|\u00A0 Sponsors: ", h("span", { style: { color: C.textMuted, fontWeight: 500 } }, "T. Morrison, Dr. Crews, E. Oyekan")),
          h("div", { style: { fontFamily: monoFont, fontSize: 10, color: C.textDim, marginTop: 3 } }, "PRJ0213271 \u00A0\u00B7\u00A0 Sep 2025 - Jan 2026 \u00A0\u00B7\u00A0 1,079 cases")
        )
      ),
      /* Filter */
      h("div", { style: { display: "flex", gap: 8, marginBottom: 20, padding: "12px 16px", background: C.white, borderRadius: 10, border: "1px solid " + C.cardBorder, boxShadow: C.shadow, alignItems: "center" } },
        h("span", { style: { fontSize: 12, fontWeight: 600, color: C.textMuted, marginRight: 4 } }, "Filter:"),
        filterButtons.map(function(b) {
          var active = filter === b.key;
          return h("button", { key: b.key, onClick: function() { setFilter(b.key); }, style: { fontFamily: font, fontSize: 13, fontWeight: active ? 600 : 500, color: active ? b.color : C.textMuted, background: active ? b.bg : "transparent", border: "1.5px solid " + (active ? b.border : "transparent"), borderRadius: 7, padding: "6px 16px", transition: "all 0.15s ease" } }, b.label);
        }),
        filter !== "All" && h("span", { style: { fontFamily: monoFont, fontSize: 11, color: modColor[filter], marginLeft: "auto", fontWeight: 600 } }, examSummary[filter].total + " cases \u00B7 " + examSummary[filter].unique + " exam types")
      ),
      /* Metric Cards */
      h("div", { style: { display: "flex", gap: 20, marginBottom: 24, flexWrap: "wrap" } },
        h("div", { style: { flex: "1 1 0", minWidth: 400, display: "flex", flexDirection: "column" } },
          h(GroupLabel, null, "Workload"),
          h("div", { style: { display: "flex", gap: 12, flex: 1 } },
            h(MetricCard, { label: "Total Cases", value: m.totalCases, detail: m.totalDetail }),
            h(MetricCard, { label: "After-Hours", value: m.afterVal, detail: m.afterDetail }),
            h("div", { style: { background: C.card, border: "1px solid " + C.cardBorder, borderRadius: 10, padding: "16px 20px", boxShadow: C.shadow, flex: 1, minWidth: 170 } },
              h("div", { style: { fontFamily: font, fontSize: 10, color: C.textDim, textTransform: "uppercase", letterSpacing: "0.08em", marginBottom: 10 } }, "Modality Split"),
              h("div", { style: { display: "flex", gap: 0, height: 8, borderRadius: 4, overflow: "hidden", marginBottom: 10 } },
                modSplitData.map(function(s) { return h("div", { key: s.name, style: { width: (s.value / 1079) * 100 + "%", background: s.color, opacity: filter !== "All" && filter !== s.name ? 0.2 : 1, transition: "opacity 0.2s" } }); })
              ),
              h("div", { style: { display: "flex", flexDirection: "column", gap: 4 } },
                modSplitData.map(function(s) {
                  return (
                    h("div", { key: s.name, style: { display: "flex", alignItems: "center", gap: 6, opacity: filter !== "All" && filter !== s.name ? 0.35 : 1, transition: "opacity 0.2s" } },
                      h("div", { style: { width: 6, height: 6, borderRadius: "50%", background: s.color } }),
                      h("span", { style: { fontFamily: font, fontSize: 11, color: C.textMuted, width: 28 } }, s.name),
                      h("span", { style: { fontFamily: monoFont, fontSize: 11, color: C.text, fontWeight: 600 } }, s.value),
                      h("span", { style: { fontFamily: monoFont, fontSize: 10, color: C.textDim } }, "(" + ((s.value / 1079) * 100).toFixed(0) + "%)")
                    )
                  );
                })
              )
            )
          )
        ),
        h("div", { style: { width: 1, background: C.cardBorder, alignSelf: "stretch", marginTop: 20 } }),
        h("div", { style: { flex: "1 1 0", minWidth: 400, display: "flex", flexDirection: "column" } },
          h(GroupLabel, null, "Performance"),
          h("div", { style: { display: "flex", gap: 12, flex: 1 } },
            h(MetricCard, { label: "Order \u2192 Scheduled", value: m.schedVal, detail: m.schedDetail, highlight: true }),
            h(MetricCard, { label: "Order \u2192 Exam Begin", value: m.accessVal, detail: m.accessDetail, highlight: true }),
            h(MetricCard, { label: "Scheduling Target", value: m.targetVal, detail: m.targetDetail })
          )
        )
      ),
      /* KPI Explanation */
      h("div", { style: { background: C.white, border: "1px solid " + C.cardBorder, borderRadius: 8, padding: "14px 22px", marginBottom: 24, display: "flex", gap: 32, flexWrap: "wrap", boxShadow: C.shadow } },
        h("div", { style: { flex: 1, minWidth: 260 } },
          h("div", { style: { fontSize: 12, fontWeight: 600, color: C.accent, marginBottom: 3 } }, "Scheduling KPI \u00B7 Order \u2192 Scheduled On"),
          h("div", { style: { fontSize: 12, color: C.textMuted, lineHeight: 1.5 } }, "How fast the system responds to an urgent order. Reflects coordinator experience and scheduling workflow efficiency.")
        ),
        h("div", { style: { width: 1, background: C.cardBorder, alignSelf: "stretch" } }),
        h("div", { style: { flex: 1, minWidth: 260 } },
          h("div", { style: { fontSize: 12, fontWeight: 600, color: C.us, marginBottom: 3 } }, "Access KPI \u00B7 Order \u2192 Begin Exam"),
          h("div", { style: { fontSize: 12, color: C.textMuted, lineHeight: 1.5 } }, "How quickly the patient actually gets imaged. Includes travel time, other appointments, and patient choice.")
        )
      ),
      /* Charts Row 1 */
      h("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: 18, marginBottom: 18 } },
        h(ChartCard, null,
          h(SectionTitle, { subtitle: "Monthly median, minutes" }, "Scheduling TAT: Order \u2192 Scheduled"),
          h(ModLegend, { showOverall: true, filter: filter }),
          h(ResponsiveContainer, { width: "100%", height: 240 },
            h(LineChart, { data: schedTAT, margin: { top: 8, right: 16, bottom: 4, left: 0 } },
              h(CartesianGrid, { strokeDasharray: "3 3", stroke: "#E8EBF0" }),
              h(XAxis, { dataKey: "month", tick: { fill: C.textDim, fontSize: 11 }, axisLine: { stroke: C.cardBorder } }),
              h(YAxis, { tick: { fill: C.textDim, fontSize: 11 }, axisLine: { stroke: C.cardBorder }, domain: [0, 60] }),
              h(Tooltip, { contentStyle: tooltipStyle.contentStyle, itemStyle: tooltipStyle.itemStyle, labelStyle: tooltipStyle.labelStyle }),
              h(ReferenceLine, { y: 17, stroke: C.green, strokeDasharray: "6 4", strokeWidth: 2, label: { value: "Target 17m", fill: C.green, fontSize: 10, position: "right" } }),
              filter === "All" && h(Line, { type: "monotone", dataKey: "Overall", stroke: C.overall, strokeWidth: 2.5, strokeDasharray: "6 3", dot: { r: 3.5, fill: C.overall } }),
              modKeys.map(function(k) { return h(Line, { key: k, type: "monotone", dataKey: k, stroke: modColor[k], strokeWidth: 2.5, dot: { r: 3.5, fill: modColor[k] } }); })
            )
          ),
          h(TrendRow, { trends: schedTrends }),
          h(Callout, { color: C.textMuted, bg: "#F8FAFC" }, "Flat / slight worsening - expected since process redesign has not yet begun. MRI peaked at 52m in Nov before recovering. US creeping upward.")
        ),
        h(ChartCard, null,
          h(SectionTitle, { subtitle: "Monthly median, minutes (hover for hours)" }, "Access TAT: Order \u2192 Begin Exam"),
          h(ModLegend, { filter: filter }),
          h(ResponsiveContainer, { width: "100%", height: 240 },
            h(LineChart, { data: accessTAT, margin: { top: 8, right: 16, bottom: 4, left: 0 } },
              h(CartesianGrid, { strokeDasharray: "3 3", stroke: "#E8EBF0" }),
              h(XAxis, { dataKey: "month", tick: { fill: C.textDim, fontSize: 11 }, axisLine: { stroke: C.cardBorder } }),
              h(YAxis, { tick: { fill: C.textDim, fontSize: 11 }, axisLine: { stroke: C.cardBorder }, domain: [0, accessYMax], tickFormatter: function(v) { return (v / 60).toFixed(1) + "h"; } }),
              h(Tooltip, { content: h(AccessTooltip) }),
              modKeys.map(function(k) { return h(Line, { key: k, type: "monotone", dataKey: k, stroke: modColor[k], strokeWidth: 2.5, dot: { r: 3.5, fill: modColor[k] } }); })
            )
          ),
          h(TrendRow, { trends: accessTrends }),
          h(Callout, { color: C.mri, bg: "#FDF2F8" }, "Volatile. MRI swings 4.5-7.5 hrs - likely slot availability and protocol complexity, not scheduling workflow. CT stable ~3h. US drifting up.")
        )
      ),
      /* Charts Row 2 */
      h("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: 18, marginBottom: 18 } },
        h(ChartCard, null,
          h(SectionTitle, { subtitle: "By modality, monthly" }, "Case Volume"),
          h(ModLegend, { filter: filter }),
          h(ResponsiveContainer, { width: "100%", height: 240 },
            h(BarChart, { data: monthlyVolume, margin: { top: 8, right: 16, bottom: 4, left: 0 } },
              h(CartesianGrid, { strokeDasharray: "3 3", stroke: "#E8EBF0" }),
              h(XAxis, { dataKey: "month", tick: { fill: C.textDim, fontSize: 11 }, axisLine: { stroke: C.cardBorder } }),
              h(YAxis, { tick: { fill: C.textDim, fontSize: 11 }, axisLine: { stroke: C.cardBorder } }),
              h(Tooltip, { contentStyle: tooltipStyle.contentStyle, itemStyle: tooltipStyle.itemStyle, labelStyle: tooltipStyle.labelStyle }),
              modKeys.map(function(k) { return h(Bar, { key: k, dataKey: k, fill: modColor[k], radius: [3, 3, 0, 0] }); })
            )
          ),
          h(TrendRow, { trends: volTrends.filter(function(t) { return filter === "All" || t.mod === filter || t.mod === "Total"; }) }),
          h(Callout, { color: C.textMuted, bg: "#F8FAFC" }, "Stable overall (~216/mo). US growing share: 27% in Sep to 36% in Jan. Dec highest volume - likely holiday coverage effects.")
        ),
        h(ChartCard, null,
          h(SectionTitle, { subtitle: "Peak at 3 PM \u00b7 After-hours nearly 2x prior estimate" }, "Exam Starts by Hour of Day"),
          h(ResponsiveContainer, { width: "100%", height: 240 },
            h(BarChart, { data: hourlyData, margin: { top: 8, right: 16, bottom: 4, left: 0 } },
              h(CartesianGrid, { strokeDasharray: "3 3", stroke: "#E8EBF0" }),
              h(XAxis, { dataKey: "hour", tick: { fill: C.textDim, fontSize: 10 }, axisLine: { stroke: C.cardBorder } }),
              h(YAxis, { tick: { fill: C.textDim, fontSize: 11 }, axisLine: { stroke: C.cardBorder } }),
              h(Tooltip, { contentStyle: tooltipStyle.contentStyle, itemStyle: tooltipStyle.itemStyle, labelStyle: tooltipStyle.labelStyle }),
              h(Bar, { dataKey: "cases", radius: [3, 3, 0, 0] },
                hourlyData.map(function(entry, i) { return h(Cell, { key: i, fill: entry.block === "after" ? C.afterHours : entry.block === "afternoon" ? C.green : C.accent, opacity: 0.85 }); })
              )
            )
          ),
          h("div", { style: { display: "flex", gap: 6, marginTop: 10, flexWrap: "wrap" } },
            timeBlocks.map(function(b) {
              return (
                h("div", { key: b.label, style: { display: "flex", alignItems: "center", gap: 6, background: "#F8FAFC", border: "1px solid " + C.cardBorder, borderRadius: 6, padding: "5px 10px" } },
                  h("div", { style: { width: 8, height: 8, borderRadius: 2, background: b.color } }),
                  h("span", { style: { fontSize: 11, color: C.textMuted } }, b.label + ":"),
                  h("span", { style: { fontFamily: monoFont, fontSize: 11, fontWeight: 600, color: C.text } }, b.cases),
                  h("span", { style: { fontSize: 11, color: C.textDim } }, "(" + b.pct + "%)")
                )
              );
            })
          ),
          h(Callout, { color: C.afterHours, bg: "#FFFBEB" }, "After-hours demand (25.7%) is nearly 2x the prior 13% A3 estimate. RSC closes at 5 PM but 277 exams begin after. Supports extended RSC hours to 9 PM.")
        )
      ),
      /* Row 3: Priority + Sites + Ordering */
      h("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: 18, marginBottom: 18 } },
        h(ChartCard, null,
          h(SectionTitle, { subtitle: filter === "All" ? "9 options exist, only 2 used meaningfully" : filter + " priority breakdown" }, "Order Priority Distribution"),
          h("div", { style: { display: "flex", flexDirection: "column", gap: 10 } },
            priorityData.map(function(p) {
              return (
                h("div", { key: p.name },
                  h("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: 3 } },
                    h("span", { style: { fontSize: 12, color: C.textMuted } }, p.name),
                    h("span", { style: { fontFamily: monoFont, fontSize: 12, color: C.text } }, p.value + " ", h("span", { style: { color: C.textDim, fontSize: 10 } }, "(" + p.pct + "%)"))
                  ),
                  h("div", { style: { height: 5, background: "#F1F5F9", borderRadius: 3, overflow: "hidden" } },
                    h("div", { style: { height: "100%", width: (p.value / maxPriority) * 100 + "%", background: p.color, borderRadius: 3 } })
                  )
                )
              );
            })
          ),
          filter === "All" && h(Callout, { color: C.stat, bg: "#FFFBEB" }, "Supports case for simplified order priority definitions."),
          filter === "MRI" && h(Callout, { color: C.mri, bg: "#FDF2F8" }, "MRI is dominated by Expedite (77%) - opposite of CT/US which are majority STAT. Reflects different ordering patterns.")
        ),
        h(ChartCard, null,
          h(SectionTitle, { subtitle: "Scheduling TAT median" }, "Performing Sites"),
          h("div", { style: { display: "flex", flexDirection: "column", gap: 4 } },
            h("div", { style: { display: "flex", padding: "0 8px 6px", borderBottom: "1px solid " + C.cardBorder } },
              h("span", { style: { fontSize: 10, color: C.textDim, textTransform: "uppercase", letterSpacing: "0.06em", flex: 1 } }, "Site"),
              h("span", { style: { fontSize: 10, color: C.textDim, textTransform: "uppercase", letterSpacing: "0.06em", width: 48, textAlign: "right" } }, "Cases"),
              h("span", { style: { fontSize: 10, color: C.textDim, textTransform: "uppercase", letterSpacing: "0.06em", width: 52, textAlign: "right" } }, "TAT")
            ),
            siteData.map(function(s, i) {
              var tatVal = parseFloat(s.tat);
              return (
                h("div", { key: s.site, style: { display: "flex", alignItems: "center", padding: "6px 8px", borderRadius: 5, background: i % 2 === 0 ? "#F8FAFC" : "transparent" } },
                  h("span", { style: { fontSize: 12, color: C.textMuted, flex: 1 } }, s.site),
                  h("span", { style: { fontFamily: monoFont, fontSize: 12, color: C.text, width: 48, textAlign: "right" } }, s.cases),
                  h("span", { style: { fontFamily: monoFont, fontSize: 11, width: 52, textAlign: "right", fontWeight: 600, color: tatVal > 40 ? C.red : tatVal < 30 ? C.green : C.textMuted } }, s.tat)
                )
              );
            })
          )
        ),
        h(ChartCard, null,
          h(SectionTitle, { subtitle: "By case count" }, "Top Ordering Locations"),
          h("div", { style: { display: "flex", flexDirection: "column", gap: 7 } },
            orderingData.map(function(loc, i) {
              return (
                h("div", { key: loc.name, style: { display: "flex", alignItems: "center", gap: 8 } },
                  h("span", { style: { fontFamily: monoFont, fontSize: 10, color: C.textDim, width: 16, textAlign: "right" } }, i + 1),
                  h("div", { style: { flex: 1 } },
                    h("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: 3 } },
                      h("span", { style: { fontSize: 12, color: C.textMuted } }, loc.name),
                      h("span", { style: { fontFamily: monoFont, fontSize: 12, color: C.text } }, loc.cases)
                    ),
                    h("div", { style: { height: 4, background: "#F1F5F9", borderRadius: 2, overflow: "hidden" } },
                      h("div", { style: { height: "100%", width: (loc.cases / maxOrdering) * 100 + "%", background: filter !== "All" ? modColor[filter] : C.accent, borderRadius: 2 } })
                    )
                  )
                )
              );
            })
          )
        )
      ),
      /* Collapsible Exam Types - 3 columns */
      h("div", { style: { marginBottom: 18 } },
        h("button", { onClick: function() { setExamOpen(!examOpen); }, style: {
          display: "flex", alignItems: "center", gap: 10, width: "100%", padding: "14px 20px",
          background: C.white, border: "1px solid " + C.cardBorder, borderRadius: examOpen ? "10px 10px 0 0" : 10,
          boxShadow: C.shadow, fontFamily: font, textAlign: "left", transition: "border-radius 0.2s"
        } },
          h("div", { style: { background: "linear-gradient(135deg, #2563EB, #7C3AED)", width: 4, height: 20, borderRadius: 2 } }),
          h("h2", { style: { fontFamily: font, fontSize: 18, fontWeight: 700, color: C.text, margin: 0, flex: 1 } }, "Exam Type Breakdown"),
          h("span", { style: { fontFamily: font, fontSize: 12, color: C.textDim } }, filter === "All" ? "204 unique exams across modalities" : examSummary[filter].unique + " unique " + filter + " exams"),
          h("span", { style: { fontSize: 18, color: C.textDim, transition: "transform 0.2s", transform: examOpen ? "rotate(180deg)" : "rotate(0deg)", lineHeight: 1 } }, "\u25BC")
        ),
        examOpen && (
          h("div", { style: { background: C.white, border: "1px solid " + C.cardBorder, borderTop: "none", borderRadius: "0 0 10px 10px", padding: 20, boxShadow: C.shadow } },
            h("div", { style: { display: "grid", gridTemplateColumns: examMods.length === 1 ? "1fr" : "1fr 1fr 1fr", gap: 20 } },
              examMods.map(function(mod) {
                return (
                  h("div", { key: mod },
                    h(ExamTable, { modality: mod, color: examColors[mod].color, bgColor: examColors[mod].bg, borderColor: examColors[mod].border })
                  )
                );
              })
            )
          )
        )
      ),
      /* Footer */
      h("div", { style: { textAlign: "center", padding: "16px 0 0", borderTop: "1px solid " + C.cardBorder, fontSize: 10, color: C.textDim, fontFamily: monoFont } },
        "1,079 same-day STAT/Expedite cases \u00A0\u00B7\u00A0 Sep 2025 - Jan 2026 \u00A0\u00B7\u00A0 Source: Epic \u00A0\u00B7\u00A0 2 records excluded (negative TAT)"
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(h(Dashboard));
</script>
</body>
</html>
